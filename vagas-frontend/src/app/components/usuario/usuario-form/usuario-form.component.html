<div class="card">
  <div class="card-header">
    <h4 class="mb-0">
      <i class="fas fa-user me-2"></i>
      {{ isEdicao ? 'Editar' : 'Novo' }} Usuário
    </h4>
  </div>
  
  <div class="card-body">
    <form #usuarioForm="ngForm" (ngSubmit)="salvar()">
      <!-- Dados básicos -->
      <div class="row">
        <div class="col-md-8 mb-3">
          <label for="nome" class="form-label">Nome *</label>
          <input 
            type="text" 
            id="nome"
            name="nome"
            class="form-control" 
            [(ngModel)]="usuario.nome"
            required
            #nome="ngModel"
            placeholder="Digite o nome completo"
          >
          @if (nome.invalid && nome.touched) {
            <div class="text-danger mt-1">
              <small>Nome é obrigatório</small>
            </div>
          }
        </div>
        
        <div class="col-md-4 mb-3">
          <label for="email" class="form-label">Email</label>
          <input 
            type="email" 
            id="email"
            name="email"
            class="form-control" 
            [(ngModel)]="usuario.email"
            #email="ngModel"
            placeholder="Digite o email"
          >
          @if (email.invalid && email.touched) {
            <div class="text-danger mt-1">
              <small>Email deve ter formato válido</small>
            </div>
          }
        </div>
      </div>

      <!-- Endereço -->
      <div class="card mt-4">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="fas fa-map-marker-alt me-2"></i>
            Endereço
          </h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-3 mb-3">
              <label for="cep" class="form-label">CEP</label>
              <input 
                type="text" 
                id="cep"
                name="cep"
                class="form-control" 
                [(ngModel)]="usuario.endereco.cep"
                placeholder="00000-000"
                maxlength="9"
              >
            </div>
            
            <div class="col-md-7 mb-3">
              <label for="rua" class="form-label">Rua/Logradouro</label>
              <input 
                type="text" 
                id="rua"
                name="rua"
                class="form-control" 
                [(ngModel)]="usuario.endereco.rua"
                placeholder="Digite a rua"
              >
            </div>
            
            <div class="col-md-2 mb-3">
              <label for="numero" class="form-label">Número</label>
              <input 
                type="text" 
                id="numero"
                name="numero"
                class="form-control" 
                [(ngModel)]="usuario.endereco.numero"
                placeholder="Nº"
              >
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="cidade" class="form-label">Cidade</label>
              <input 
                type="text" 
                id="cidade"
                name="cidade"
                class="form-control" 
                [(ngModel)]="usuario.endereco.cidade"
                placeholder="Digite a cidade"
              >
            </div>
            
            <div class="col-md-2 mb-3">
              <label for="estado" class="form-label">Estado</label>
              <select 
                id="estado"
                name="estado"
                class="form-select" 
                [(ngModel)]="usuario.endereco.estado"
              >
                <option value="">Selecione</option>
                <option value="AC">AC</option>
                <option value="AL">AL</option>
                <option value="AP">AP</option>
                <option value="AM">AM</option>
                <option value="BA">BA</option>
                <option value="CE">CE</option>
                <option value="DF">DF</option>
                <option value="ES">ES</option>
                <option value="GO">GO</option>
                <option value="MA">MA</option>
                <option value="MT">MT</option>
                <option value="MS">MS</option>
                <option value="MG">MG</option>
                <option value="PA">PA</option>
                <option value="PB">PB</option>
                <option value="PR">PR</option>
                <option value="PE">PE</option>
                <option value="PI">PI</option>
                <option value="RJ">RJ</option>
                <option value="RN">RN</option>
                <option value="RS">RS</option>
                <option value="RO">RO</option>
                <option value="RR">RR</option>
                <option value="SC">SC</option>
                <option value="SP">SP</option>
                <option value="SE">SE</option>
                <option value="TO">TO</option>
              </select>
            </div>
            
            <div class="col-md-4 mb-3">
              <label for="complemento" class="form-label">Complemento</label>
              <input 
                type="text" 
                id="complemento"
                name="complemento"
                class="form-control" 
                [(ngModel)]="usuario.endereco.complemento"
                placeholder="Apto, bloco, etc."
              >
            </div>
          </div>
        </div>
      </div>

      <!-- Botões -->
      <div class="d-flex justify-content-between mt-4">
        <button 
          type="button" 
          class="btn btn-secondary"
          routerLink="/app/usuarios"
        >
          <i class="fas fa-arrow-left me-1"></i>
          Voltar
        </button>
        
        <div>
          @if (isEdicao) {
            <button 
              type="button" 
              class="btn btn-danger me-2"
              (click)="confirmarExclusao()"
            >
              <i class="fas fa-trash me-1"></i>
              Excluir
            </button>
          }
          
          <button 
            type="submit" 
            class="btn btn-primary"
            [disabled]="usuarioForm.invalid || salvando"
          >
            @if (salvando) {
              <div class="spinner-border spinner-border-sm me-1" role="status">
                <span class="visually-hidden">Salvando...</span>
              </div>
            } @else {
              <i class="fas fa-save me-1"></i>
            }
            {{ isEdicao ? 'Atualizar' : 'Salvar' }}
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
